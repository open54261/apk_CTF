"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8808],{8808:(G,g,s)=>{s.r(g),s.d(g,{LoginSchoolsPageModule:()=>j});var c=s(4742),u=s(230),f=s(7019),d=s(9598),a=s(467),o=s(4438),m=s(7376),v=s(3207),p=s(1626),L=s(7529),P=s(6186);let I=(()=>{var n;class r{constructor(i,t,e){this.http=i,this.errorHandler=t,this.loginStatus=e,this.schoolsUrl="https://app-school-select.quiculum.se/api/schools",this.loginSchools=[],this.subscription=this.loginStatus.isLoggedInState.subscribe(h=>h||this.refresh())}dispose(){this.subscription.unsubscribe()}init(){var i=this;return(0,a.A)(function*(){return null==i.initPromise&&(i.initPromise=i.loadLoginSchools(),i.loginSchools=yield i.initPromise),i.loginSchools})()}loadLoginSchools(){var i=this;return(0,a.A)(function*(){try{var t=yield(0,v.s)(i.http.get(i.schoolsUrl))}catch(e){i.errorHandler.reportError(e,{message:"Kunde inte ladda skolor",function:"loadLoginSchools"})}return m.sortBy(t,"name")})()}refresh(){this.loginSchools=[],this.initPromise=void 0}}return(n=r).\u0275fac=function(i){return new(i||n)(o.KVO(p.Qq),o.KVO(L.c),o.KVO(P.B))},n.\u0275prov=o.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),r})();var y=s(4538),C=s(3656),S=s(177),F=s(8924);function M(n,r){if(1&n){const l=o.RV6();o.j41(0,"ion-item",3),o.bIt("click",function(){const t=o.eBV(l).$implicit,e=o.XpG();return o.Njj(e.onClickSchool(t))}),o.EFF(1),o.k0s()}if(2&n){const l=r.$implicit;o.R7$(),o.SpI(" ",l.name," ")}}const O=[{path:"",component:(()=>{var n;class r{constructor(i,t,e){this.loginSchoolsProvider=i,this.loginSchoolProvider=t,this.navCtrl=e,this.isInitialized=!1,this.filteredSchools=[],this.initView()}ngAfterViewInit(){setTimeout(()=>{this.searchBar.setFocus()},500)}onClickSchool(i){this.loginSchoolProvider.setLoginSchool(i),this.navCtrl.back()}onSearchInput(i){let t=i.target.value||"";this.filteredSchools=this.loginSchoolsProvider.loginSchools.filter(e=>this.match(t,e))}initView(){var i=this;return(0,a.A)(function*(){const t=yield i.loginSchoolsProvider.init();i.filteredSchools=t,i.isInitialized=!0})()}match(i,t){let e=i.toLowerCase();return t.name.toLowerCase().indexOf(e)>-1||t.urlString.indexOf(e)>-1||t.host.indexOf(e)>-1}}return(n=r).\u0275fac=function(i){return new(i||n)(o.rXU(I),o.rXU(y.d),o.rXU(C.q9))},n.\u0275cmp=o.VBU({type:n,selectors:[["page-login-schools"]],viewQuery:function(i,t){if(1&i&&o.GBs(c.S1,5),2&i){let e;o.mGM(e=o.lsd())&&(t.searchBar=e.first)}},decls:7,vars:4,consts:[["pageTitle","LOGIN_SCHOOLS_TITLE"],[3,"ionInput","placeholder"],[3,"click",4,"ngFor","ngForOf"],[3,"click"]],template:function(i,t){1&i&&(o.j41(0,"ion-header"),o.nrm(1,"app-login-header",0),o.k0s(),o.j41(2,"ion-content")(3,"ion-searchbar",1),o.nI1(4,"translate"),o.bIt("ionInput",function(h){return t.onSearchInput(h)}),o.k0s(),o.j41(5,"ion-list"),o.DNE(6,M,2,1,"ion-item",2),o.k0s()()),2&i&&(o.R7$(3),o.FS9("placeholder",o.bMT(4,2,"SEARCH")),o.R7$(3),o.Y8G("ngForOf",t.filteredSchools))},dependencies:[c.W9,c.eU,c.uz,c.nf,c.S1,c.Gw,S.Sq,F.C,u.D9],encapsulation:2}),r})()}];let T=(()=>{var n;class r{}return(n=r).\u0275fac=function(i){return new(i||n)},n.\u0275mod=o.$C({type:n}),n.\u0275inj=o.G2t({imports:[d.iI.forChild(O),d.iI]}),r})();var V=s(9417);let j=(()=>{var n;class r{}return(n=r).\u0275fac=function(i){return new(i||n)},n.\u0275mod=o.$C({type:n}),n.\u0275inj=o.G2t({imports:[c.bv,S.MD,V.YN,T,u.h,f.h]}),r})()}}]);