"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2547],{1916:(B,C,t)=>{t.d(C,{$:()=>D});var i=t(467),c=t(3207),e=t(4438),l=t(4742),P=t(230),E=t(5151);let D=(()=>{var n;class I{constructor(o,g,d){this.loadingCtrl=o,this.translateService=g,this.userAlertService=d,this.subscriptions=[],this.showLoading=!1,this.loadingDismissTimeout=-1,this.loadingDismissTimeoutMS=3e4}ngOnDestroy(){this.subscriptions.forEach(o=>o.unsubscribe())}addSub(o){this.subscriptions.push(o)}translate(o,g){var d=this;return(0,i.A)(function*(){return(yield(0,c.s)(d.translateService.get(o)))||g||o})()}withSpinner(o,g,d){var m=this;return(0,i.A)(function*(){let M;yield m.presentLoading(g),m.loadingDismissTimeout=setTimeout(()=>m.timeoutLoading(d),m.loadingDismissTimeoutMS);try{M=yield o()}catch(b){m.userAlertService.debug(b)}return yield m.dismissLoading(),M})()}timeoutLoading(o){var g=this;return(0,i.A)(function*(){o||(o=yield g.translate("LOADING_FAILED")),g.userAlertService.error(o),yield g.dismissLoading()})()}dismissLoading(){var o=this;return(0,i.A)(function*(){-1!=o.loadingDismissTimeout&&(clearTimeout(o.loadingDismissTimeout),o.loadingDismissTimeout=-1),o.showLoading=!1,(yield o.loadingCtrl.getTop())&&(yield o.loadingCtrl.dismiss(null))})()}presentLoading(o){var g=this;return(0,i.A)(function*(){return g.showLoading=!0,yield g.loadingCtrl.create({message:o}).then(d=>{d.present().then(()=>{g.showLoading&&d.dismiss()})})})()}}return(n=I).\u0275fac=function(o){return new(o||n)(e.rXU(l.Xi),e.rXU(P.c$),e.rXU(E.p))},n.\u0275cmp=e.VBU({type:n,selectors:[["ng-component"]],decls:0,vars:0,template:function(o,g){},encapsulation:2}),I})()},4416:(B,C,t)=>{t.d(C,{l:()=>v});var i=t(4438),c=t(9598),e=t(4742),l=t(177),P=t(230);const E=["*"];function D(o,g){if(1&o&&(i.j41(0,"ion-buttons",5),i.nrm(1,"ion-back-button",6),i.nI1(2,"translate"),i.k0s()),2&o){const d=i.XpG();i.R7$(),i.FS9("text",i.bMT(2,2,"BACK")),i.Y8G("defaultHref",d.backPage)}}function n(o,g){1&o&&(i.j41(0,"ion-menu-toggle",5)(1,"ion-button",7),i.nrm(2,"ion-icon",8),i.k0s()())}function I(o,g){if(1&o&&(i.j41(0,"ion-title"),i.EFF(1),i.nI1(2,"translate"),i.k0s()),2&o){const d=i.XpG();i.R7$(),i.SpI(" ",i.bMT(2,1,d.pageTitle)," ")}}let v=(()=>{var o;class g{constructor(m){this.router=m,this.backPage=""}navToMyAccount(){this.router.navigate(["my-account"])}}return(o=g).\u0275fac=function(m){return new(m||o)(i.rXU(c.Ix))},o.\u0275cmp=i.VBU({type:o,selectors:[["app-header"]],inputs:{pageTitle:"pageTitle",backPage:"backPage"},ngContentSelectors:E,decls:9,vars:3,consts:[["slot","start",4,"ngIf"],[4,"ngIf"],["slot","end"],[3,"click"],["name","cog"],["slot","start"],[3,"defaultHref","text"],["size","small","fill","clear"],["name","menu"]],template:function(m,M){1&m&&(i.NAR(),i.j41(0,"ion-header")(1,"ion-toolbar"),i.DNE(2,D,3,4,"ion-buttons",0)(3,n,3,0,"ion-menu-toggle",0)(4,I,3,3,"ion-title",1),i.j41(5,"ion-buttons",2)(6,"ion-button",3),i.bIt("click",function(){return M.navToMyAccount()}),i.nrm(7,"ion-icon",4),i.k0s()()()(),i.SdG(8)),2&m&&(i.R7$(2),i.Y8G("ngIf",M.backPage),i.R7$(),i.Y8G("ngIf",!M.backPage),i.R7$(),i.Y8G("ngIf",!M.isLoadingUserInfo))},dependencies:[e.Jm,e.QW,e.eU,e.iq,e.cA,e.BC,e.ai,e.el,l.bT,P.D9]}),g})()},2952:(B,C,t)=>{t.d(C,{t:()=>P});var i=t(4438),c=t(4742),e=t(177);function l(E,D){if(1&E&&(i.j41(0,"p"),i.EFF(1),i.k0s()),2&E){const n=i.XpG();i.R7$(),i.JRh(n.text)}}let P=(()=>{var E;class D{constructor(){this.text=""}}return(E=D).\u0275fac=function(I){return new(I||E)},E.\u0275cmp=i.VBU({type:E,selectors:[["q-spinner"]],hostVars:2,hostBindings:function(I,v){2&I&&i.HbH(v.expand)},inputs:{text:"text",expand:"expand"},decls:5,vars:1,consts:[[1,"ion-no-padding","ion-no-margin"],[1,"ion-justify-content-center","ion-align-items-center"],[1,"ion-text-center"],[4,"ngIf"]],template:function(I,v){1&I&&(i.j41(0,"ion-grid",0)(1,"ion-row",1)(2,"ion-col",2),i.nrm(3,"ion-spinner"),i.DNE(4,l,2,1,"p",3),i.k0s()()()),2&I&&(i.R7$(4),i.Y8G("ngIf",v.text))},dependencies:[c.hU,c.lO,c.ln,c.w2,e.bT],styles:[".expand[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]{height:100%}.expand[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{height:100%}.expand[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{color:var(--quiculum-gray)}"]}),D})()},1876:(B,C,t)=>{t.d(C,{Y:()=>i});class i{constructor(e){this._selectedItems=[],this.equalityFunction=(l,P)=>l==P,e&&(this.equalityFunction=e)}get isAnySelected(){return this._selectedItems.length>0}get selectedItems(){return this._selectedItems}isSelected(e){return!!this.selectedItems.find(P=>this.equalityFunction(e,P))}clear(){this._selectedItems=[]}deselectItem(e){let P=this.selectedItems.findIndex(E=>this.equalityFunction(e,E));P>-1&&this.selectedItems.splice(P,1)}selectItem(e){this.isSelected(e)||this.selectedItems.push(e)}selectItems(e){e.forEach(l=>this.selectItem(l))}setSelectedItems(e){this._selectedItems=e}toggleItem(e){this.isSelected(e)?this.deselectItem(e):this.selectItem(e)}}},6090:(B,C,t)=>{t.d(C,{v:()=>I});var i=t(1916),c=t(4438),e=t(1204),l=t(9598),P=t(4742),E=t(230),D=t(5151),n=t(9196);let I=(()=>{var v;class o extends i.${constructor(d,m,M,b,U,s){super(M,b,U),this.account=d,this.router=m,this.userInfoProvider=s}ionViewDidLoad(){}ionViewWillEnter(){}ionViewDidEnter(){}ionViewWillLeave(){}ionViewDidLeave(){}ionViewWillUnload(){}ionViewCanEnter(){return!0}ionViewCanLeave(){return!0}navTo(d,m){const M=Array.isArray(d)?d:[d];this.router.navigate(M,m)}navToUrl(d,m){this.router.navigateByUrl(d,m)}}return(v=o).\u0275fac=function(d){return new(d||v)(c.rXU(e.$),c.rXU(l.Ix),c.rXU(P.Xi),c.rXU(E.c$),c.rXU(D.p),c.rXU(n.Z))},v.\u0275cmp=c.VBU({type:v,selectors:[["ng-component"]],features:[c.Vt3],decls:0,vars:0,template:function(d,m){}}),o})()},2547:(B,C,t)=>{t.r(C),t.d(C,{MainPageModule:()=>F});var i=t(177),c=t(9417),e=t(4742),l=t(9598),P=t(467),E=t(6090),D=t(8330),n=t(4438),I=t(1204),v=t(230),o=t(5151),g=t(9196),d=t(4840),m=t(2618),M=t(7643),b=t(4416),U=t(2952);function s(u,R){1&u&&(n.j41(0,"div",1),n.nrm(1,"q-spinner"),n.k0s())}function T(u,R){if(1&u){const f=n.RV6();n.j41(0,"ion-col",20)(1,"ion-card",21),n.bIt("click",function(){n.eBV(f);const p=n.XpG(2);return n.Njj(p.navToAbsenceReportPage())}),n.j41(2,"ion-card-content"),n.nrm(3,"ion-icon",22),n.j41(4,"ion-label"),n.EFF(5,"Fr\xe5nvaroanm\xe4lan"),n.k0s()()()()}}function a(u,R){if(1&u){const f=n.RV6();n.j41(0,"ion-col",20)(1,"ion-card",7),n.bIt("click",function(){n.eBV(f);const p=n.XpG(2);return n.Njj(p.navToDocumentationPage())}),n.j41(2,"ion-card-content"),n.nrm(3,"ion-icon",23),n.j41(4,"ion-label"),n.EFF(5),n.nI1(6,"translate"),n.k0s()()()()}2&u&&(n.R7$(5),n.JRh(n.bMT(6,1,"DOCUMENTATION_TITLE")))}function r(u,R){if(1&u){const f=n.RV6();n.j41(0,"ion-col",20)(1,"ion-card",7),n.bIt("click",function(){n.eBV(f);const p=n.XpG(2);return n.Njj(p.navToPreschoolCalendarPage())}),n.j41(2,"ion-card-content"),n.nrm(3,"ion-icon",24),n.j41(4,"ion-label"),n.EFF(5),n.nI1(6,"translate"),n.k0s()()()()}2&u&&(n.R7$(5),n.JRh(n.bMT(6,1,"STAY_TIMES_TITLE")))}function h(u,R){if(1&u){const f=n.RV6();n.j41(0,"ion-button",25),n.bIt("click",function(){n.eBV(f);const p=n.XpG(2);return n.Njj(p.onClickChangeRole())}),n.EFF(1),n.nI1(2,"translate"),n.k0s()}2&u&&(n.R7$(),n.SpI(" ",n.bMT(2,1,"CHANGE_ROLE")," "))}function O(u,R){if(1&u){const f=n.RV6();n.qex(0),n.j41(1,"ion-grid")(2,"ion-row"),n.DNE(3,T,6,0,"ion-col",5)(4,a,7,3,"ion-col",5)(5,r,7,3,"ion-col",5),n.j41(6,"ion-col",6)(7,"ion-card",7),n.bIt("click",function(){n.eBV(f);const p=n.XpG();return n.Njj(p.navToSchedule())}),n.j41(8,"ion-card-content"),n.nrm(9,"ion-icon",8),n.j41(10,"ion-label"),n.EFF(11,"Schema"),n.k0s()()()(),n.j41(12,"ion-col",6)(13,"ion-card",7),n.bIt("click",function(){n.eBV(f);const p=n.XpG();return n.Njj(p.navToNoticeBoard())}),n.j41(14,"ion-card-content"),n.nrm(15,"ion-icon",9),n.j41(16,"ion-label"),n.EFF(17,"Nyheter"),n.k0s()()()(),n.j41(18,"ion-col",6)(19,"ion-card",7),n.bIt("click",function(){n.eBV(f);const p=n.XpG();return n.Njj(p.navToCalendar())}),n.j41(20,"ion-card-content"),n.nrm(21,"ion-icon",10),n.j41(22,"ion-label"),n.EFF(23,"Kalender"),n.k0s()()()(),n.j41(24,"ion-col",6)(25,"ion-card",7),n.bIt("click",function(){n.eBV(f);const p=n.XpG();return n.Njj(p.navToMessages())}),n.j41(26,"ion-card-content"),n.nrm(27,"ion-icon",11),n.j41(28,"ion-label"),n.EFF(29,"Meddelanden"),n.k0s()()()()()(),n.j41(30,"ion-grid",12)(31,"ion-row",13)(32,"ion-col",14),n.nrm(33,"ion-icon",15),n.k0s(),n.j41(34,"ion-col",14)(35,"div",16),n.EFF(36),n.nI1(37,"translate"),n.k0s(),n.j41(38,"div",17),n.EFF(39),n.k0s(),n.j41(40,"div",18),n.EFF(41),n.k0s()(),n.j41(42,"ion-col",14),n.DNE(43,h,3,3,"ion-button",19),n.k0s()()(),n.bVm()}if(2&u){const f=n.XpG();n.R7$(3),n.Y8G("ngIf",f.isAbsenceReportEnabled),n.R7$(),n.Y8G("ngIf",f.isDocumentationEnabled),n.R7$(),n.Y8G("ngIf",f.isPreeschoolCalenderEnabled),n.R7$(31),n.Lme("",n.bMT(37,8,"LOGGED_IN_AS")," ",f.getRoleName," "),n.R7$(3),n.SpI("",f.getSchoolName," "),n.R7$(2),n.JRh(f.userInfo.userFullName),n.R7$(2),n.Y8G("ngIf",f.hasMultipleRoles)}}const j=[{path:"",component:(()=>{var u;class R extends E.v{constructor(_,p,L,x,S,N,G,V,K,W){super(_,L,p,x,S,N),this.rolesProvider=G,this.moduleSettingProvider=V,this.modalCtrl=K,this.moduleService=W,this.isBusy=!0,this.userInfo={userFullName:""},this.roles=[]}ngOnInit(){this.initView();const _=this.userInfoProvider.userInfoState.subscribe(L=>this.userInfo=L||{userFullName:""}),p=this.rolesProvider.rolesState.subscribe(L=>{this.roles=L});this.addSub(_),this.addSub(p),this.isBusy=!1}onClickChangeRole(){var _=this;return(0,P.A)(function*(){yield _.openRolePicker()})()}get hasMultipleRoles(){return this.roles&&this.roles.length>1}get isAbsenceReportEnabled(){return this.userInfo&&!this.isUnderageStudent}get isDocumentationEnabled(){return this.userInfo&&"Guardian"==this.userInfo.roleName}get isPreeschoolCalenderEnabled(){return this.userInfo&&"Guardian"==this.userInfo.roleName}get isUnderageStudent(){return this.userInfo&&"Student"==this.userInfo.roleName&&this.userInfo.isUnderage}get getRoleName(){return this.userInfo&&this.userInfo.roleNameTranslated&&this.userInfo.roleNameTranslated.toLocaleLowerCase()||""}get getSchoolName(){return this.userInfo.schoolName||""}navToAbsenceReportPage(){this.navTo("absence-report")}navToDocumentationPage(){this.navTo("documentation")}navToPreschoolCalendarPage(){this.navTo("preschool-calendar")}navToNoticeBoard(){this.navTo(["tabs","notice-board"])}navToMessages(){this.navTo(["tabs","messages"])}navToSchedule(){this.navTo(["tabs","schedule"])}navToCalendar(){this.navTo(["tabs","calendar"])}navToTab(_){this.navTo(_)}changeRole(_,p){var L=this;return(0,P.A)(function*(){yield L.account.changeRole(_,p),location.reload()})()}initView(){var _=this;return(0,P.A)(function*(){yield _.userInfoProvider.init(),_.isBusy=!1})()}openRolePicker(){var _=this;return(0,P.A)(function*(){_.isBusy=!0,yield _.rolesProvider.init();let L=_.rolesProvider.roles.map(S=>({id:S.roleName,name:S.roleNameTranslated,school:S.school,schoolName:S.schoolName})),x=yield _.modalCtrl.create({component:D.M,componentProps:{items:L}});x.present(),x.onDidDismiss().then(S=>{S&&S.data&&S.data.item?_.changeRole(S.data.item.id,S.data.item.school):_.isBusy=!1})})()}}return(u=R).\u0275fac=function(_){return new(_||u)(n.rXU(I.$),n.rXU(e.Xi),n.rXU(l.Ix),n.rXU(v.c$),n.rXU(o.p),n.rXU(g.Z),n.rXU(d.L),n.rXU(m.C),n.rXU(e.W3),n.rXU(M.v))},u.\u0275cmp=n.VBU({type:u,selectors:[["page-main"]],features:[n.Vt3],decls:7,vars:5,consts:[[3,"pageTitle"],[1,"ion-padding"],[1,"splash-logo"],["class","ion-padding",4,"ngIf"],[4,"ngIf"],["size","12",4,"ngIf"],["size","6"],["color","primary",1,"ion-no-padding","ion-no-margin","custom-card",3,"click"],["name","apps"],["name","megaphone"],["name","calendar"],["name","mail"],[1,"user-info","ion-margin-top"],[1,"ion-align-items-center","ion-justify-content-center"],["size","auto"],["name","person-circle"],[1,"role"],[1,"schoolName"],[1,"user"],["color","action",3,"click",4,"ngIf"],["size","12"],["color","action","type","button",1,"ion-no-padding","ion-no-margin","custom-card",3,"click"],["name","checkbox"],["name","images"],["name","calendar-number-outline"],["color","action",3,"click"]],template:function(_,p){1&_&&(n.nrm(0,"app-header",0),n.nI1(1,"translate"),n.j41(2,"ion-content")(3,"div",1),n.nrm(4,"div",2),n.k0s(),n.DNE(5,s,2,0,"div",3)(6,O,44,10,"ng-container",4),n.k0s()),2&_&&(n.FS9("pageTitle",n.bMT(1,3,"MAIN_TITLE")),n.R7$(5),n.Y8G("ngIf",p.isBusy),n.R7$(),n.Y8G("ngIf",!p.isBusy))},dependencies:[i.bT,e.Jm,e.b_,e.I9,e.hU,e.W9,e.lO,e.iq,e.he,e.ln,b.l,U.t,v.D9],styles:[".splash-logo[_ngcontent-%COMP%]{margin:auto;background:url(appicon.d89d062336d8dd5b.png) repeat transparent;background-size:100%;width:75px;height:75px}.user-info[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--quiculum-gray);font-size:3em}.user-info[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]{white-space:nowrap;font-size:.9em}.user-info[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{white-space:nowrap;font-size:1.1em;font-weight:700}.user-info[_ngcontent-%COMP%]   .schoolName[_ngcontent-%COMP%]{font-size:.9em}ion-card[_ngcontent-%COMP%]{border-radius:0}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px}.custom-container[_ngcontent-%COMP%]{padding:10px}.card-content-ios[_ngcontent-%COMP%]{-webkit-padding-start:10px;padding-inline-start:10px;-webkit-padding-end:10px;padding-inline-end:10px;padding-top:10px;padding-bottom:10px;font-size:1rem;line-height:1.4}.custom-card[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 6px 12px rgba(0,0,0,.15);transition:transform .2s ease-in-out;text-align:center}.custom-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.custom-card[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px;margin-bottom:4px}.custom-card[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-weight:500}"]}),R})()}];let y=(()=>{var u;class R{}return(u=R).\u0275fac=function(_){return new(_||u)},u.\u0275mod=n.$C({type:u}),u.\u0275inj=n.G2t({imports:[l.iI.forChild(j),l.iI]}),R})();var k=t(7019);let F=(()=>{var u;class R{}return(u=R).\u0275fac=function(_){return new(_||u)},u.\u0275mod=n.$C({type:u}),u.\u0275inj=n.G2t({imports:[i.MD,c.YN,e.bv,y,v.h,k.h]}),R})()},8330:(B,C,t)=>{t.d(C,{M:()=>U});var i=t(467),c=t(1876),e=t(4438),l=t(4742),P=t(3656),E=t(230),D=t(177);function n(s,T){if(1&s){const a=e.RV6();e.j41(0,"ion-button",1),e.bIt("click",function(){e.eBV(a);const h=e.XpG();return e.Njj(h.dismiss())}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"DONE")," "))}function I(s,T){if(1&s&&(e.j41(0,"p",6),e.EFF(1),e.k0s()),2&s){const a=e.XpG();e.R7$(),e.JRh(a.emptyLabel)}}function v(s,T){if(1&s){const a=e.RV6();e.j41(0,"ion-searchbar",8),e.nI1(1,"translate"),e.bIt("ionInput",function(h){e.eBV(a);const O=e.XpG(2);return e.Njj(O.onSearchInput(h))}),e.k0s()}2&s&&e.FS9("placeholder",e.bMT(1,1,"SEARCH"))}function o(s,T){if(1&s){const a=e.RV6();e.j41(0,"ion-item")(1,"ion-label"),e.EFF(2),e.k0s(),e.j41(3,"ion-checkbox",10),e.bIt("ionChange",function(){const h=e.eBV(a).$implicit,O=e.XpG(3);return e.Njj(O.onClickItem(h))}),e.k0s()()}if(2&s){const a=T.$implicit,r=e.XpG(3);e.R7$(2),e.JRh(a.name),e.R7$(),e.Y8G("checked",r.isSelected(a))}}function g(s,T){if(1&s&&(e.j41(0,"ion-list"),e.DNE(1,o,4,2,"ion-item",9),e.k0s()),2&s){const a=e.XpG(2);e.R7$(),e.Y8G("ngForOf",a.filteredItems)}}function d(s,T){if(1&s&&(e.j41(0,"div")(1,"ion-label",13),e.EFF(2),e.k0s()()),2&s){const a=e.XpG().$implicit;e.R7$(2),e.JRh(a.schoolName)}}function m(s,T){if(1&s){const a=e.RV6();e.j41(0,"ion-item",12),e.bIt("click",function(){const h=e.eBV(a).$implicit,O=e.XpG(3);return e.Njj(O.onClickItem(h))}),e.j41(1,"ion-label"),e.EFF(2),e.k0s(),e.DNE(3,d,3,1,"div",5),e.k0s()}if(2&s){const a=T.$implicit;e.R7$(2),e.JRh(a.name),e.R7$(),e.Y8G("ngIf",a.schoolName)}}function M(s,T){if(1&s&&(e.j41(0,"ion-list"),e.DNE(1,m,4,2,"ion-item",11),e.k0s()),2&s){const a=e.XpG(2);e.R7$(),e.Y8G("ngForOf",a.filteredItems)}}function b(s,T){if(1&s&&(e.qex(0),e.DNE(1,v,2,3,"ion-searchbar",7)(2,g,2,1,"ion-list",5)(3,M,2,1,"ion-list",5),e.bVm()),2&s){const a=e.XpG();e.R7$(),e.Y8G("ngIf",a.isSearchVisible),e.R7$(),e.Y8G("ngIf",a.isMultiSelect),e.R7$(),e.Y8G("ngIf",!a.isMultiSelect)}}let U=(()=>{var s;class T{constructor(r,h,O){this.modalCtrl=r,this.navParams=h,this.translate=O,this.isSearching=!1,this.filteredItems=[],this.selection=new c.Y}ionViewWillEnter(){var r=this;return(0,i.A)(function*(){yield r.initLang(),r.initView()})()}get isSearchVisible(){return this.items&&this.items.length>10}isSelected(r){return this.selection.isSelected(r)}onClickItem(r){this.isMultiSelect?this.toggleSelection(r):(this.selection.selectItem(r),this.dismiss())}onSearchInput(r){let h=r.target.value||"";this.filteredItems=this.items.filter(O=>this.match(h,O))}dismiss(){let r=this.selection.selectedItems;0===r.length?this.modalCtrl.dismiss():this.modalCtrl.dismiss(this.isMultiSelect?{items:r}:{item:r[0]})}initLang(){this.translate.setDefaultLang("sv");const r=this.translate.getBrowserLang();r&&r.startsWith("en")?this.translate.use("en"):this.translate.use("sv"),this.translate.get(["SELECTABLE_OPTIONS_MISSING","SELECT_ONE_OR_MORE","SELECT_ONE"]).subscribe(O=>{this.translations=O})}initView(){this.selection=new c.Y,this.emptyLabel=this.navParams.data.emptyLabel||this.translations.SELECTABLE_OPTIONS_MISSING,this.isMultiSelect=this.navParams.data.multi,this.title=this.navParams.data.title||(this.isMultiSelect?this.translations.SELECT_ONE_OR_MORE:this.translations.SELECT_ONE),this.items=this.navParams.data.items,this.isEmpty=0==this.items.length,this.selection.setSelectedItems(this.navParams.data.selectedItems||[]),this.filteredItems=this.items}match(r,h){let O=r.toLocaleLowerCase();return h.name.toLocaleLowerCase().indexOf(O)>-1}toggleSelection(r){this.selection.toggleItem(r)}}return(s=T).\u0275fac=function(r){return new(r||s)(e.rXU(l.W3),e.rXU(P.y8),e.rXU(E.c$))},s.\u0275cmp=e.VBU({type:s,selectors:[["page-picker"]],decls:14,vars:7,consts:[["slot","start"],["fill","clear",3,"click"],["slot","end"],["fill","clear",3,"click",4,"ngIf"],["class","ion-padding ion-text-center",4,"ngIf"],[4,"ngIf"],[1,"ion-padding","ion-text-center"],["autocapitalize","off",3,"placeholder","ionInput",4,"ngIf"],["autocapitalize","off",3,"ionInput","placeholder"],[4,"ngFor","ngForOf"],["item-end","",3,"ionChange","checked"],["button","",3,"click",4,"ngFor","ngForOf"],["button","",3,"click"],[2,"color","black","font-size","0.7em"]],template:function(r,h){1&r&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),e.bIt("click",function(){return h.dismiss()}),e.j41(4,"span"),e.EFF(5),e.nI1(6,"translate"),e.k0s()()(),e.j41(7,"ion-title"),e.EFF(8),e.k0s(),e.j41(9,"ion-buttons",2),e.DNE(10,n,3,3,"ion-button",3),e.k0s()()(),e.j41(11,"ion-content"),e.DNE(12,I,2,1,"p",4)(13,b,4,3,"ng-container",5),e.k0s()),2&r&&(e.R7$(5),e.JRh(e.bMT(6,5,"CANCEL")),e.R7$(3),e.JRh(h.title),e.R7$(2),e.Y8G("ngIf",h.isMultiSelect),e.R7$(2),e.Y8G("ngIf",h.isEmpty),e.R7$(),e.Y8G("ngIf",!h.isEmpty))},dependencies:[D.Sq,D.bT,l.Jm,l.QW,l.eY,l.W9,l.eU,l.uz,l.he,l.nf,l.S1,l.BC,l.ai,l.hB,l.Gw,E.D9],encapsulation:2}),T})()},1204:(B,C,t)=>{t.d(C,{$:()=>m});var i=t(467),c=t(4438),e=t(4538),l=t(5320),P=t(9196),E=t(772),D=t(6186),n=t(2840),I=t(3656),v=t(2457),o=t(4840),g=t(7643),d=t(2618);let m=(()=>{var M;class b{constructor(s,T,a,r,h,O,A,j,y,k,F){this.loginSchool=s,this.token=T,this.userInfo=a,this.userSettings=r,this.loginStatus=h,this.roleService=O,this.platform=A,this.push=j,this.rolesProvider=y,this.moduleService=k,this.moduleSettingProvider=F}clearStudentCardPage(){this.studentCardPage&&this.studentCardPage.ngOnDestroy()}logout(){this.token.clearToken(),this.userInfo.clear(),this.rolesProvider.clear(),this.moduleSettingProvider.clear(),this.clearStudentCardPage(),this.loginStatus.setStatus(!1),(this.platform.is("capacitor")||this.platform.is("cordova"))&&this.push.removePushToken()}changeRole(s,T){var a=this;return(0,i.A)(function*(){const r=yield a.roleService.changeRole(s,T);yield a.token.updateToken(r),a.userInfo.refresh();let h=yield a.userInfo.init();a.loginStatus.setRole(h.roleName),a.moduleSettingProvider.updateModuleSettings()})()}logOutAndForgetSchool(){this.logout(),this.loginSchool.clearLoginSchool(),this.userSettings.clearUserSettings()}logOutAndForgetSchoolAndSettings(){this.logout(),this.loginSchool.clearLoginSchool(),this.userSettings.clearUserSettings()}}return(M=b).\u0275fac=function(s){return new(s||M)(c.KVO(e.d),c.KVO(l.x),c.KVO(P.Z),c.KVO(E.w),c.KVO(D.B),c.KVO(n.W),c.KVO(I.OD),c.KVO(v.T),c.KVO(o.L),c.KVO(g.v),c.KVO(d.C))},M.\u0275prov=c.jDH({token:M,factory:M.\u0275fac,providedIn:"root"}),b})()}}]);