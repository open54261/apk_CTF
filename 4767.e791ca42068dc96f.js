"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4767],{1916:(y,R,s)=>{s.d(R,{$:()=>O});var o=s(467),c=s(3207),e=s(4438),g=s(4742),_=s(230),m=s(5151);let O=(()=>{var S;class P{constructor(l,f,C){this.loadingCtrl=l,this.translateService=f,this.userAlertService=C,this.subscriptions=[],this.showLoading=!1,this.loadingDismissTimeout=-1,this.loadingDismissTimeoutMS=3e4}ngOnDestroy(){this.subscriptions.forEach(l=>l.unsubscribe())}addSub(l){this.subscriptions.push(l)}translate(l,f){var C=this;return(0,o.A)(function*(){return(yield(0,c.s)(C.translateService.get(l)))||f||l})()}withSpinner(l,f,C){var v=this;return(0,o.A)(function*(){let M;yield v.presentLoading(f),v.loadingDismissTimeout=setTimeout(()=>v.timeoutLoading(C),v.loadingDismissTimeoutMS);try{M=yield l()}catch(U){v.userAlertService.debug(U)}return yield v.dismissLoading(),M})()}timeoutLoading(l){var f=this;return(0,o.A)(function*(){l||(l=yield f.translate("LOADING_FAILED")),f.userAlertService.error(l),yield f.dismissLoading()})()}dismissLoading(){var l=this;return(0,o.A)(function*(){-1!=l.loadingDismissTimeout&&(clearTimeout(l.loadingDismissTimeout),l.loadingDismissTimeout=-1),l.showLoading=!1,(yield l.loadingCtrl.getTop())&&(yield l.loadingCtrl.dismiss(null))})()}presentLoading(l){var f=this;return(0,o.A)(function*(){return f.showLoading=!0,yield f.loadingCtrl.create({message:l}).then(C=>{C.present().then(()=>{f.showLoading&&C.dismiss()})})})()}}return(S=P).\u0275fac=function(l){return new(l||S)(e.rXU(g.Xi),e.rXU(_.c$),e.rXU(m.p))},S.\u0275cmp=e.VBU({type:S,selectors:[["ng-component"]],decls:0,vars:0,template:function(l,f){},encapsulation:2}),P})()},4416:(y,R,s)=>{s.d(R,{l:()=>t});var o=s(4438),c=s(9598),e=s(4742),g=s(177),_=s(230);const m=["*"];function O(l,f){if(1&l&&(o.j41(0,"ion-buttons",5),o.nrm(1,"ion-back-button",6),o.nI1(2,"translate"),o.k0s()),2&l){const C=o.XpG();o.R7$(),o.FS9("text",o.bMT(2,2,"BACK")),o.Y8G("defaultHref",C.backPage)}}function S(l,f){1&l&&(o.j41(0,"ion-menu-toggle",5)(1,"ion-button",7),o.nrm(2,"ion-icon",8),o.k0s()())}function P(l,f){if(1&l&&(o.j41(0,"ion-title"),o.EFF(1),o.nI1(2,"translate"),o.k0s()),2&l){const C=o.XpG();o.R7$(),o.SpI(" ",o.bMT(2,1,C.pageTitle)," ")}}let t=(()=>{var l;class f{constructor(v){this.router=v,this.backPage=""}navToMyAccount(){this.router.navigate(["my-account"])}}return(l=f).\u0275fac=function(v){return new(v||l)(o.rXU(c.Ix))},l.\u0275cmp=o.VBU({type:l,selectors:[["app-header"]],inputs:{pageTitle:"pageTitle",backPage:"backPage"},ngContentSelectors:m,decls:9,vars:3,consts:[["slot","start",4,"ngIf"],[4,"ngIf"],["slot","end"],[3,"click"],["name","cog"],["slot","start"],[3,"defaultHref","text"],["size","small","fill","clear"],["name","menu"]],template:function(v,M){1&v&&(o.NAR(),o.j41(0,"ion-header")(1,"ion-toolbar"),o.DNE(2,O,3,4,"ion-buttons",0)(3,S,3,0,"ion-menu-toggle",0)(4,P,3,3,"ion-title",1),o.j41(5,"ion-buttons",2)(6,"ion-button",3),o.bIt("click",function(){return M.navToMyAccount()}),o.nrm(7,"ion-icon",4),o.k0s()()()(),o.SdG(8)),2&v&&(o.R7$(2),o.Y8G("ngIf",M.backPage),o.R7$(),o.Y8G("ngIf",!M.backPage),o.R7$(),o.Y8G("ngIf",!M.isLoadingUserInfo))},dependencies:[e.Jm,e.QW,e.eU,e.iq,e.cA,e.BC,e.ai,e.el,g.bT,_.D9]}),f})()},2952:(y,R,s)=>{s.d(R,{t:()=>_});var o=s(4438),c=s(4742),e=s(177);function g(m,O){if(1&m&&(o.j41(0,"p"),o.EFF(1),o.k0s()),2&m){const S=o.XpG();o.R7$(),o.JRh(S.text)}}let _=(()=>{var m;class O{constructor(){this.text=""}}return(m=O).\u0275fac=function(P){return new(P||m)},m.\u0275cmp=o.VBU({type:m,selectors:[["q-spinner"]],hostVars:2,hostBindings:function(P,t){2&P&&o.HbH(t.expand)},inputs:{text:"text",expand:"expand"},decls:5,vars:1,consts:[[1,"ion-no-padding","ion-no-margin"],[1,"ion-justify-content-center","ion-align-items-center"],[1,"ion-text-center"],[4,"ngIf"]],template:function(P,t){1&P&&(o.j41(0,"ion-grid",0)(1,"ion-row",1)(2,"ion-col",2),o.nrm(3,"ion-spinner"),o.DNE(4,g,2,1,"p",3),o.k0s()()()),2&P&&(o.R7$(4),o.Y8G("ngIf",t.text))},dependencies:[c.hU,c.lO,c.ln,c.w2,e.bT],styles:[".expand[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]{height:100%}.expand[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{height:100%}.expand[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{color:var(--quiculum-gray)}"]}),O})()},1876:(y,R,s)=>{s.d(R,{Y:()=>o});class o{constructor(e){this._selectedItems=[],this.equalityFunction=(g,_)=>g==_,e&&(this.equalityFunction=e)}get isAnySelected(){return this._selectedItems.length>0}get selectedItems(){return this._selectedItems}isSelected(e){return!!this.selectedItems.find(_=>this.equalityFunction(e,_))}clear(){this._selectedItems=[]}deselectItem(e){let _=this.selectedItems.findIndex(m=>this.equalityFunction(e,m));_>-1&&this.selectedItems.splice(_,1)}selectItem(e){this.isSelected(e)||this.selectedItems.push(e)}selectItems(e){e.forEach(g=>this.selectItem(g))}setSelectedItems(e){this._selectedItems=e}toggleItem(e){this.isSelected(e)?this.deselectItem(e):this.selectItem(e)}}},6090:(y,R,s)=>{s.d(R,{v:()=>P});var o=s(1916),c=s(4438),e=s(1204),g=s(9598),_=s(4742),m=s(230),O=s(5151),S=s(9196);let P=(()=>{var t;class l extends o.${constructor(C,v,M,U,B,u){super(M,U,B),this.account=C,this.router=v,this.userInfoProvider=u}ionViewDidLoad(){}ionViewWillEnter(){}ionViewDidEnter(){}ionViewWillLeave(){}ionViewDidLeave(){}ionViewWillUnload(){}ionViewCanEnter(){return!0}ionViewCanLeave(){return!0}navTo(C,v){const M=Array.isArray(C)?C:[C];this.router.navigate(M,v)}navToUrl(C,v){this.router.navigateByUrl(C,v)}}return(t=l).\u0275fac=function(C){return new(C||t)(c.rXU(e.$),c.rXU(g.Ix),c.rXU(_.Xi),c.rXU(m.c$),c.rXU(O.p),c.rXU(S.Z))},t.\u0275cmp=c.VBU({type:t,selectors:[["ng-component"]],features:[c.Vt3],decls:0,vars:0,template:function(C,v){}}),l})()},4767:(y,R,s)=>{s.r(R),s.d(R,{ContactsPageModule:()=>dt});var o=s(177),c=s(9417),e=s(4742),g=s(9598),_=s(467),m=s(7376),O=s(3207),S=s(6090),P=s(8330),t=s(4438),l=s(1204),f=s(230),C=s(5151),v=s(9196),M=s(6969),U=s(4849),B=s(8593),u=s(4416),b=s(2952);const h=["*"];function p(i,d){if(1&i&&t.nrm(0,"ion-icon",7),2&i){const r=t.XpG();t.Y8G("name",r.icon)}}function I(i,d){if(1&i&&(t.j41(0,"p",8),t.EFF(1),t.k0s()),2&i){const r=t.XpG();t.R7$(),t.JRh(r.subTitle)}}function D(i,d){1&i&&t.nrm(0,"ion-icon",9)}function A(i,d){1&i&&t.nrm(0,"ion-icon",10)}function G(i,d){1&i&&(t.j41(0,"div",11),t.SdG(1),t.k0s())}let j=(()=>{var i;class d{constructor(){this.expandable=!1,this.expanded=!1,this.hideSubTitleOnExpand=!1}}return(i=d).\u0275fac=function(a){return new(a||i)},i.\u0275cmp=t.VBU({type:i,selectors:[["q-card"]],inputs:{expandable:"expandable",expanded:"expanded",icon:"icon",title:"title",subTitle:"subTitle",hideSubTitleOnExpand:"hideSubTitleOnExpand"},ngContentSelectors:h,decls:10,vars:6,consts:[["lines","none",3,"click"],["slot","start",3,"name",4,"ngIf"],[1,"title"],["class","subtitle",4,"ngIf"],["slot","end","name","chevron-down-circle-outline",4,"ngIf"],["slot","end","name","chevron-up-circle-outline",4,"ngIf"],["class","ion-padding",4,"ngIf"],["slot","start",3,"name"],[1,"subtitle"],["slot","end","name","chevron-down-circle-outline"],["slot","end","name","chevron-up-circle-outline"],[1,"ion-padding"]],template:function(a,n){1&a&&(t.NAR(),t.j41(0,"ion-card")(1,"ion-item",0),t.bIt("click",function(){return n.expanded=!n.expanded}),t.DNE(2,p,1,1,"ion-icon",1),t.j41(3,"ion-label")(4,"span",2),t.EFF(5),t.k0s(),t.DNE(6,I,2,1,"p",3),t.k0s(),t.DNE(7,D,1,0,"ion-icon",4)(8,A,1,0,"ion-icon",5),t.k0s(),t.DNE(9,G,2,0,"div",6),t.k0s()),2&a&&(t.R7$(2),t.Y8G("ngIf",n.icon),t.R7$(3),t.JRh(n.title),t.R7$(),t.Y8G("ngIf",n.subTitle&&!(n.expanded&&n.hideSubTitleOnExpand)),t.R7$(),t.Y8G("ngIf",n.expandable&&!n.expanded),t.R7$(),t.Y8G("ngIf",n.expandable&&n.expanded),t.R7$(),t.Y8G("ngIf",n.expanded))},dependencies:[e.b_,e.iq,e.uz,e.he,o.bT],styles:[".subtitle[_ngcontent-%COMP%]{font-size:.7em!important}ion-card[_ngcontent-%COMP%]{margin:.5rem}"]}),d})();var x=s(1916),N=s(8499),F=s(1076),k=s(1164);function V(i,d){if(1&i&&(t.j41(0,"div"),t.EFF(1),t.k0s()),2&i){const r=t.XpG();t.R7$(),t.JRh(null==r.user?null:r.user.phoneNumber)}}function K(i,d){1&i&&(t.j41(0,"div"),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.JRh(t.bMT(2,1,"MISSING_OR_HIDDEN")))}function X(i,d){if(1&i){const r=t.RV6();t.j41(0,"ion-button",7),t.bIt("click",function(){t.eBV(r);const n=t.XpG();return t.Njj(n.copyToClipboard(null==n.user?null:n.user.phoneNumber))}),t.nrm(1,"ion-icon",8),t.k0s()}}function W(i,d){if(1&i){const r=t.RV6();t.j41(0,"ion-button",7),t.bIt("click",function(){t.eBV(r);const n=t.XpG();return t.Njj(n.call(null==n.user?null:n.user.phoneNumber))}),t.nrm(1,"ion-icon",9),t.k0s()}}function Y(i,d){if(1&i&&(t.j41(0,"div"),t.EFF(1),t.k0s()),2&i){const r=t.XpG();t.R7$(),t.JRh(null==r.user?null:r.user.email)}}function H(i,d){1&i&&(t.j41(0,"div"),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.JRh(t.bMT(2,1,"MISSING_OR_HIDDEN")))}function J(i,d){if(1&i){const r=t.RV6();t.j41(0,"ion-button",7),t.bIt("click",function(){t.eBV(r);const n=t.XpG();return t.Njj(n.copyToClipboard(null==n.user?null:n.user.email))}),t.nrm(1,"ion-icon",8),t.k0s()}}function z(i,d){if(1&i){const r=t.RV6();t.j41(0,"ion-button",7),t.bIt("click",function(){t.eBV(r);const n=t.XpG();return t.Njj(n.sendEmail(null==n.user?null:n.user.email))}),t.nrm(1,"ion-icon",10),t.k0s()}}let Q=(()=>{var i;class d extends x.${constructor(a,n,E,T,L,$){super(a,n,E),this.emailComposer=T,this.clipboard=L,this.callNumber=$}call(a){this.callNumber.callNumber(a,!0)}copyToClipboard(a){var n=this;return(0,_.A)(function*(){yield n.clipboard.copy(a);let E=yield n.translate("COPIED_TO_CLIPBOARD");n.userAlertService.info(E)})()}sendEmail(a){this.emailComposer.open({to:a})}}return(i=d).\u0275fac=function(a){return new(a||i)(t.rXU(e.Xi),t.rXU(f.c$),t.rXU(C.p),t.rXU(N.J),t.rXU(F.B),t.rXU(k.i))},i.\u0275cmp=t.VBU({type:i,selectors:[["user-contacts"]],inputs:{user:"user"},features:[t.Vt3],decls:21,vars:14,consts:[[1,"ion-no-padding"],[1,"contacts","ion-padding-bottom"],["size","4"],["size","8"],[4,"ngIf"],[1,"buttons"],["color","success",3,"click",4,"ngIf"],["color","success",3,"click"],["name","copy"],["name","call"],["name","mail"]],template:function(a,n){1&a&&(t.j41(0,"ion-grid",0)(1,"ion-row",1)(2,"ion-col",2),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.j41(5,"ion-col",3),t.DNE(6,V,2,1,"div",4)(7,K,3,3,"div",4),t.j41(8,"div",5),t.DNE(9,X,2,0,"ion-button",6)(10,W,2,0,"ion-button",6),t.k0s()()(),t.j41(11,"ion-row",1)(12,"ion-col",2),t.EFF(13),t.nI1(14,"translate"),t.k0s(),t.j41(15,"ion-col",3),t.DNE(16,Y,2,1,"div",4)(17,H,3,3,"div",4),t.j41(18,"div",5),t.DNE(19,J,2,0,"ion-button",6)(20,z,2,0,"ion-button",6),t.k0s()()()()),2&a&&(t.R7$(3),t.SpI("",t.bMT(4,10,"PHONE"),":"),t.R7$(3),t.Y8G("ngIf",null==n.user?null:n.user.phoneNumber),t.R7$(),t.Y8G("ngIf",!(null!=n.user&&n.user.phoneNumber)),t.R7$(2),t.Y8G("ngIf",null==n.user?null:n.user.phoneNumber),t.R7$(),t.Y8G("ngIf",null==n.user?null:n.user.phoneNumber),t.R7$(3),t.SpI("",t.bMT(14,12,"MAIL"),":"),t.R7$(3),t.Y8G("ngIf",null==n.user?null:n.user.email),t.R7$(),t.Y8G("ngIf",!(null!=n.user&&n.user.email)),t.R7$(2),t.Y8G("ngIf",null==n.user?null:n.user.email),t.R7$(),t.Y8G("ngIf",null==n.user?null:n.user.email))},dependencies:[e.Jm,e.hU,e.lO,e.iq,e.ln,o.bT,f.D9],encapsulation:2}),d})();function Z(i,d){if(1&i&&(t.j41(0,"ion-label",9),t.EFF(1),t.k0s()),2&i){const r=t.XpG(2);t.R7$(),t.SpI(" ",null==r.selectedStudent?null:r.selectedStudent.schoolName," ")}}function w(i,d){if(1&i){const r=t.RV6();t.j41(0,"ion-toolbar")(1,"ion-item",7),t.bIt("click",function(){t.eBV(r);const n=t.XpG();return t.Njj(n.onClickStudent())}),t.j41(2,"ion-label"),t.EFF(3),t.nI1(4,"translate"),t.DNE(5,Z,2,1,"ion-label",8),t.k0s()()()}if(2&i){const r=t.XpG();t.R7$(3),t.SpI(" ",(null==r.selectedStudent?null:r.selectedStudent.name)||t.bMT(4,2,"SELECT_STUDENT")," "),t.R7$(2),t.Y8G("ngIf",r.selectedStudent)}}function q(i,d){1&i&&(t.j41(0,"ion-segment-button",10),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"CLASS")," "))}function tt(i,d){1&i&&(t.j41(0,"div",11),t.nrm(1,"q-spinner"),t.k0s())}function et(i,d){if(1&i&&(t.j41(0,"div"),t.EFF(1),t.k0s()),2&i){const r=d.$implicit;t.R7$(),t.JRh(r)}}function nt(i,d){if(1&i&&(t.j41(0,"q-card",14)(1,"ion-grid",15)(2,"ion-row",16)(3,"ion-col",17),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"ion-col",18),t.DNE(7,et,2,1,"div",19),t.k0s()()(),t.nrm(8,"user-contacts",20),t.k0s()),2&i){const r=d.$implicit;t.Y8G("expandable",!0)("title",r.name)("subTitle",r.subjectsString),t.R7$(4),t.SpI("",t.bMT(5,6,"SUBJECTS"),":"),t.R7$(3),t.Y8G("ngForOf",r.subjects),t.R7$(),t.Y8G("user",r)}}function it(i,d){if(1&i&&(t.qex(0),t.DNE(1,nt,9,8,"q-card",13),t.bVm()),2&i){const r=t.XpG(2);t.R7$(),t.Y8G("ngForOf",r.filteredTeachers)}}function st(i,d){if(1&i&&(t.qex(0),t.j41(1,"div",23),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.nrm(4,"user-contacts",20),t.bVm()),2&i){const r=d.$implicit;t.R7$(2),t.E5c(" ",r.firstName," ",r.lastName," (",t.bMT(3,4,"GUARDIAN"),") "),t.R7$(2),t.Y8G("user",r)}}function ot(i,d){if(1&i&&(t.j41(0,"q-card",22),t.DNE(1,st,5,6,"ng-container",19),t.k0s()),2&i){const r=d.$implicit;t.Y8G("expandable",!0)("title",r.firstName+" "+r.lastName),t.R7$(),t.Y8G("ngForOf",r.guardians)}}function at(i,d){if(1&i&&(t.qex(0),t.DNE(1,ot,2,3,"q-card",21),t.bVm()),2&i){const r=t.XpG(2);t.R7$(),t.Y8G("ngForOf",r.filteredClassStudents)}}function rt(i,d){if(1&i){const r=t.RV6();t.qex(0),t.j41(1,"ion-searchbar",12),t.bIt("ionInput",function(n){t.eBV(r);const E=t.XpG();return t.Njj(E.onSearchInput(n))}),t.k0s(),t.DNE(2,it,2,1,"ng-container",1)(3,at,2,1,"ng-container",1),t.bVm()}if(2&i){const r=t.XpG();t.R7$(),t.Y8G("placeholder",r.searchPlaceholder),t.R7$(),t.Y8G("ngIf","teachers"==r.listType),t.R7$(),t.Y8G("ngIf","class"==r.listType)}}const lt=[{path:"",component:(()=>{var i;class d extends S.v{constructor(a,n,E,T,L,$,mt,gt,ht,pt){super(a,n,E,T,L,$),this.students=mt,this.classService=gt,this.studentService=ht,this.modalCtrl=pt,this.classStudents=[],this.teachers=[],this.isBusy=!1,this.listType="teachers",this.filteredClassStudents=[],this.filteredTeachers=[],this.filteredStudents=[],this.userInfo={},this.hideClassContactInfo=!1,this.initLang()}get isGuardian(){return this.userInfo&&"Guardian"==this.userInfo.roleName}get searchPlaceholder(){return this.translations&&"teachers"==this.listType?this.translations.SEARCH_BY_NAME_OR_SUBJECT:this.translations&&"class"==this.listType?this.translations.SEARCH:""}ngOnInit(){var a=this;return(0,_.A)(function*(){a.isBusy=!0,a.addSub(a.userInfoProvider.userInfoState.subscribe(n=>a.userInfo=n)),yield a.students.init(),a.initSelection(),a.getStudents(),a.isBusy=!1})()}getStudents(){var a=this;return(0,_.A)(function*(){try{var E=(yield a.studentService.getStudents()).filter(T=>T.schoolId===a.userInfo.schoolId);a.filteredStudents=E.map(T=>({id:T.studentId.toString(),name:`${T.firstName} ${T.lastName}`,schoolName:T.schoolName}))}catch(T){}})()}onClickStudent(){var a=this;return(0,_.A)(function*(){let n=yield a.modalCtrl.create({component:P.M,componentProps:{items:a.filteredStudents}});n.present(),n.onDidDismiss().then(E=>{E&&E.data&&E.data.item&&(!a.selectedStudent||E.data.item.id!=a.selectedStudent.id)&&a.selectStudent(E.data.item)})})()}onSearchInput(a){let n=(a.target.value||"").toLowerCase();"class"==this.listType?this.filteredClassStudents=this.classStudents.filter(E=>E.name.toLowerCase().indexOf(n)>-1):"teachers"==this.listType&&(this.filteredTeachers=this.teachers.filter(E=>E.name.toLowerCase().indexOf(n)>-1||E.subjectsString.toLowerCase().indexOf(n)>-1))}navToMyAccount(){this.navTo("my-account")}initLang(){var a=this;return(0,_.A)(function*(){a.translations=yield(0,O.s)(a.translateService.get(["SEARCH","SEARCH_BY_NAME_OR_SUBJECT"]))})()}schoolOptions(a){var n=this;return(0,_.A)(function*(){return yield n.studentService.getSchoolOptions(a)})()}initSelection(){1==this.students.list.length&&this.selectStudent(this.students.list[0])}initView(a){var n=this;return(0,_.A)(function*(){if(n.isBusy=!0,!a)return n.resetView(),void(n.isBusy=!1);try{const[E,T]=yield Promise.all([n.loadTeachers(a),n.loadStudent(a)]);if(n.teachers=E,n.filteredTeachers=E,T.schoolId){const L=yield n.schoolOptions(T.schoolId);n.hideClassContactInfo=L.hideClassContactInfo,n.hideClassContactInfo||(n.classStudents=yield n.loadClassStudents(T.classId))}n.filteredClassStudents=n.classStudents}catch(E){console.error("Error initializing view:",E),n.resetView()}finally{n.isBusy=!1}})()}resetView(){this.classStudents=[],this.teachers=[],this.filteredClassStudents=[],this.filteredTeachers=[]}loadClassStudents(a){var n=this;return(0,_.A)(function*(){let E=yield n.classService.getClassStudents(a);return(0,m.orderBy)(E,["lastName","firstName"])})()}loadStudent(a){return this.studentService.getStudent(a)}loadTeachers(a){var n=this;return(0,_.A)(function*(){let E=yield n.studentService.getStudentTeachers(a);return E.forEach(T=>{T.subjects=T.subjectNames||T.courseNames,T.subjectsString=T.subjects.join(", ")}),(0,m.orderBy)(E,["lastName","firstName"])})()}selectStudent(a){this.selectedStudent=a,this.initView(this.selectedStudent.id)}}return(i=d).\u0275fac=function(a){return new(a||i)(t.rXU(l.$),t.rXU(g.Ix),t.rXU(e.Xi),t.rXU(f.c$),t.rXU(C.p),t.rXU(v.Z),t.rXU(M.s),t.rXU(U.Y),t.rXU(B.b),t.rXU(e.W3))},i.\u0275cmp=t.VBU({type:i,selectors:[["page-contacts"]],features:[t.Vt3],decls:12,vars:11,consts:[[3,"pageTitle"],[4,"ngIf"],[1,"ion-padding"],["color","action",3,"ngModelChange","ngModel"],["value","teachers"],["value","class",4,"ngIf"],["class","ion-padding-top",4,"ngIf"],["button","","lines","none",1,"select-student",3,"click"],["class","light-label",4,"ngIf"],[1,"light-label"],["value","class"],[1,"ion-padding-top"],["autocapitalize","off",3,"ionInput","placeholder"],[3,"expandable","title","subTitle",4,"ngFor","ngForOf"],[3,"expandable","title","subTitle"],[1,"ion-no-padding"],[1,"subjects","ion-padding-bottom"],["size","4"],["size","8"],[4,"ngFor","ngForOf"],[3,"user"],[3,"expandable","title",4,"ngFor","ngForOf"],[3,"expandable","title"],[1,"contacts-title","ion-padding-bottom"]],template:function(a,n){1&a&&(t.j41(0,"app-header",0),t.nI1(1,"translate"),t.DNE(2,w,6,4,"ion-toolbar",1),t.k0s(),t.j41(3,"ion-content")(4,"div",2)(5,"ion-segment",3),t.mxI("ngModelChange",function(T){return t.DH7(n.listType,T)||(n.listType=T),T}),t.j41(6,"ion-segment-button",4),t.EFF(7),t.nI1(8,"translate"),t.k0s(),t.DNE(9,q,3,3,"ion-segment-button",5),t.k0s()(),t.DNE(10,tt,2,0,"div",6)(11,rt,4,3,"ng-container",1),t.k0s()),2&a&&(t.FS9("pageTitle",t.bMT(1,7,"CONTACTS_TITLE")),t.R7$(2),t.Y8G("ngIf",n.isGuardian),t.R7$(3),t.R50("ngModel",n.listType),t.R7$(2),t.SpI(" ",t.bMT(8,9,"TEACHERS")," "),t.R7$(2),t.Y8G("ngIf",!n.hideClassContactInfo),t.R7$(),t.Y8G("ngIf",n.isBusy),t.R7$(),t.Y8G("ngIf",!n.isBusy))},dependencies:[o.Sq,o.bT,c.BC,c.vS,e.hU,e.W9,e.lO,e.uz,e.he,e.ln,e.S1,e.Gp,e.eP,e.ai,e.Je,e.Gw,u.l,b.t,j,Q,f.D9],styles:[".select-student[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{margin:0!important}.buttons[_ngcontent-%COMP%]   button[icon-only][_ngcontent-%COMP%]{min-width:50px}.contacts-title[_ngcontent-%COMP%]{font-size:1.1em}.light-label[_ngcontent-%COMP%]{color:#000;font-size:.7em;margin-top:4px;float:right;font-weight:400!important}"]}),d})()}];let ct=(()=>{var i;class d{}return(i=d).\u0275fac=function(a){return new(a||i)},i.\u0275mod=t.$C({type:i}),i.\u0275inj=t.G2t({imports:[g.iI.forChild(lt),g.iI]}),d})();var _t=s(7019),ut=s(1683);let dt=(()=>{var i;class d{}return(i=d).\u0275fac=function(a){return new(a||i)},i.\u0275mod=t.$C({type:i}),i.\u0275inj=t.G2t({imports:[o.MD,c.YN,e.bv,ct,_t.h,f.h,ut.Y]}),d})()},8330:(y,R,s)=>{s.d(R,{M:()=>B});var o=s(467),c=s(1876),e=s(4438),g=s(4742),_=s(3656),m=s(230),O=s(177);function S(u,b){if(1&u){const h=e.RV6();e.j41(0,"ion-button",1),e.bIt("click",function(){e.eBV(h);const I=e.XpG();return e.Njj(I.dismiss())}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}2&u&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"DONE")," "))}function P(u,b){if(1&u&&(e.j41(0,"p",6),e.EFF(1),e.k0s()),2&u){const h=e.XpG();e.R7$(),e.JRh(h.emptyLabel)}}function t(u,b){if(1&u){const h=e.RV6();e.j41(0,"ion-searchbar",8),e.nI1(1,"translate"),e.bIt("ionInput",function(I){e.eBV(h);const D=e.XpG(2);return e.Njj(D.onSearchInput(I))}),e.k0s()}2&u&&e.FS9("placeholder",e.bMT(1,1,"SEARCH"))}function l(u,b){if(1&u){const h=e.RV6();e.j41(0,"ion-item")(1,"ion-label"),e.EFF(2),e.k0s(),e.j41(3,"ion-checkbox",10),e.bIt("ionChange",function(){const I=e.eBV(h).$implicit,D=e.XpG(3);return e.Njj(D.onClickItem(I))}),e.k0s()()}if(2&u){const h=b.$implicit,p=e.XpG(3);e.R7$(2),e.JRh(h.name),e.R7$(),e.Y8G("checked",p.isSelected(h))}}function f(u,b){if(1&u&&(e.j41(0,"ion-list"),e.DNE(1,l,4,2,"ion-item",9),e.k0s()),2&u){const h=e.XpG(2);e.R7$(),e.Y8G("ngForOf",h.filteredItems)}}function C(u,b){if(1&u&&(e.j41(0,"div")(1,"ion-label",13),e.EFF(2),e.k0s()()),2&u){const h=e.XpG().$implicit;e.R7$(2),e.JRh(h.schoolName)}}function v(u,b){if(1&u){const h=e.RV6();e.j41(0,"ion-item",12),e.bIt("click",function(){const I=e.eBV(h).$implicit,D=e.XpG(3);return e.Njj(D.onClickItem(I))}),e.j41(1,"ion-label"),e.EFF(2),e.k0s(),e.DNE(3,C,3,1,"div",5),e.k0s()}if(2&u){const h=b.$implicit;e.R7$(2),e.JRh(h.name),e.R7$(),e.Y8G("ngIf",h.schoolName)}}function M(u,b){if(1&u&&(e.j41(0,"ion-list"),e.DNE(1,v,4,2,"ion-item",11),e.k0s()),2&u){const h=e.XpG(2);e.R7$(),e.Y8G("ngForOf",h.filteredItems)}}function U(u,b){if(1&u&&(e.qex(0),e.DNE(1,t,2,3,"ion-searchbar",7)(2,f,2,1,"ion-list",5)(3,M,2,1,"ion-list",5),e.bVm()),2&u){const h=e.XpG();e.R7$(),e.Y8G("ngIf",h.isSearchVisible),e.R7$(),e.Y8G("ngIf",h.isMultiSelect),e.R7$(),e.Y8G("ngIf",!h.isMultiSelect)}}let B=(()=>{var u;class b{constructor(p,I,D){this.modalCtrl=p,this.navParams=I,this.translate=D,this.isSearching=!1,this.filteredItems=[],this.selection=new c.Y}ionViewWillEnter(){var p=this;return(0,o.A)(function*(){yield p.initLang(),p.initView()})()}get isSearchVisible(){return this.items&&this.items.length>10}isSelected(p){return this.selection.isSelected(p)}onClickItem(p){this.isMultiSelect?this.toggleSelection(p):(this.selection.selectItem(p),this.dismiss())}onSearchInput(p){let I=p.target.value||"";this.filteredItems=this.items.filter(D=>this.match(I,D))}dismiss(){let p=this.selection.selectedItems;0===p.length?this.modalCtrl.dismiss():this.modalCtrl.dismiss(this.isMultiSelect?{items:p}:{item:p[0]})}initLang(){this.translate.setDefaultLang("sv");const p=this.translate.getBrowserLang();p&&p.startsWith("en")?this.translate.use("en"):this.translate.use("sv"),this.translate.get(["SELECTABLE_OPTIONS_MISSING","SELECT_ONE_OR_MORE","SELECT_ONE"]).subscribe(D=>{this.translations=D})}initView(){this.selection=new c.Y,this.emptyLabel=this.navParams.data.emptyLabel||this.translations.SELECTABLE_OPTIONS_MISSING,this.isMultiSelect=this.navParams.data.multi,this.title=this.navParams.data.title||(this.isMultiSelect?this.translations.SELECT_ONE_OR_MORE:this.translations.SELECT_ONE),this.items=this.navParams.data.items,this.isEmpty=0==this.items.length,this.selection.setSelectedItems(this.navParams.data.selectedItems||[]),this.filteredItems=this.items}match(p,I){let D=p.toLocaleLowerCase();return I.name.toLocaleLowerCase().indexOf(D)>-1}toggleSelection(p){this.selection.toggleItem(p)}}return(u=b).\u0275fac=function(p){return new(p||u)(e.rXU(g.W3),e.rXU(_.y8),e.rXU(m.c$))},u.\u0275cmp=e.VBU({type:u,selectors:[["page-picker"]],decls:14,vars:7,consts:[["slot","start"],["fill","clear",3,"click"],["slot","end"],["fill","clear",3,"click",4,"ngIf"],["class","ion-padding ion-text-center",4,"ngIf"],[4,"ngIf"],[1,"ion-padding","ion-text-center"],["autocapitalize","off",3,"placeholder","ionInput",4,"ngIf"],["autocapitalize","off",3,"ionInput","placeholder"],[4,"ngFor","ngForOf"],["item-end","",3,"ionChange","checked"],["button","",3,"click",4,"ngFor","ngForOf"],["button","",3,"click"],[2,"color","black","font-size","0.7em"]],template:function(p,I){1&p&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),e.bIt("click",function(){return I.dismiss()}),e.j41(4,"span"),e.EFF(5),e.nI1(6,"translate"),e.k0s()()(),e.j41(7,"ion-title"),e.EFF(8),e.k0s(),e.j41(9,"ion-buttons",2),e.DNE(10,S,3,3,"ion-button",3),e.k0s()()(),e.j41(11,"ion-content"),e.DNE(12,P,2,1,"p",4)(13,U,4,3,"ng-container",5),e.k0s()),2&p&&(e.R7$(5),e.JRh(e.bMT(6,5,"CANCEL")),e.R7$(3),e.JRh(I.title),e.R7$(2),e.Y8G("ngIf",I.isMultiSelect),e.R7$(2),e.Y8G("ngIf",I.isEmpty),e.R7$(),e.Y8G("ngIf",!I.isEmpty))},dependencies:[O.Sq,O.bT,g.Jm,g.QW,g.eY,g.W9,g.eU,g.uz,g.he,g.nf,g.S1,g.BC,g.ai,g.hB,g.Gw,m.D9],encapsulation:2}),b})()},1204:(y,R,s)=>{s.d(R,{$:()=>v});var o=s(467),c=s(4438),e=s(4538),g=s(5320),_=s(9196),m=s(772),O=s(6186),S=s(2840),P=s(3656),t=s(2457),l=s(4840),f=s(7643),C=s(2618);let v=(()=>{var M;class U{constructor(u,b,h,p,I,D,A,G,j,x,N){this.loginSchool=u,this.token=b,this.userInfo=h,this.userSettings=p,this.loginStatus=I,this.roleService=D,this.platform=A,this.push=G,this.rolesProvider=j,this.moduleService=x,this.moduleSettingProvider=N}clearStudentCardPage(){this.studentCardPage&&this.studentCardPage.ngOnDestroy()}logout(){this.token.clearToken(),this.userInfo.clear(),this.rolesProvider.clear(),this.moduleSettingProvider.clear(),this.clearStudentCardPage(),this.loginStatus.setStatus(!1),(this.platform.is("capacitor")||this.platform.is("cordova"))&&this.push.removePushToken()}changeRole(u,b){var h=this;return(0,o.A)(function*(){const p=yield h.roleService.changeRole(u,b);yield h.token.updateToken(p),h.userInfo.refresh();let I=yield h.userInfo.init();h.loginStatus.setRole(I.roleName),h.moduleSettingProvider.updateModuleSettings()})()}logOutAndForgetSchool(){this.logout(),this.loginSchool.clearLoginSchool(),this.userSettings.clearUserSettings()}logOutAndForgetSchoolAndSettings(){this.logout(),this.loginSchool.clearLoginSchool(),this.userSettings.clearUserSettings()}}return(M=U).\u0275fac=function(u){return new(u||M)(c.KVO(e.d),c.KVO(g.x),c.KVO(_.Z),c.KVO(m.w),c.KVO(O.B),c.KVO(S.W),c.KVO(P.OD),c.KVO(t.T),c.KVO(l.L),c.KVO(f.v),c.KVO(C.C))},M.\u0275prov=c.jDH({token:M,factory:M.\u0275fac,providedIn:"root"}),U})()},2129:(y,R,s)=>{s.d(R,{h:()=>e});var o=s(467),c=s(1622);class e extends c.D{constructor(_,m){super(),this.api=_,this.loginStatus=m,this.list=[],this.setupClearOnLogout()}clear(){this.list=[]}init(_){var m=this;return(0,o.A)(function*(){let O=JSON.stringify(_);return O!=m.stringifiedParams&&(m.clear(),m.stringifiedParams=O),m.list.length||(m.list=yield m.loadList(_)),m.list})()}refresh(){var _=this;return(0,o.A)(function*(){return _.list=[],_.init()})()}loadList(_){return this.api.get(this.listEndpoint,_)}setupClearOnLogout(){this.addSub(this.loginStatus.isLoggedInState.subscribe(_=>{_||this.clear()}))}}},6969:(y,R,s)=>{s.d(R,{s:()=>_});var o=s(2129),c=s(4438),e=s(6244),g=s(6186);let _=(()=>{var m;class O extends o.h{constructor(P,t){super(P,t),this.listEndpoint="api/students/list?includeallschools=true",this.setupClearOnRoleChange()}setupClearOnRoleChange(){this.addSub(this.loginStatus.roleNameState.subscribe(P=>{P&&this.clear()}))}}return(m=O).\u0275fac=function(P){return new(P||m)(c.KVO(e.j),c.KVO(g.B))},m.\u0275prov=c.jDH({token:m,factory:m.\u0275fac,providedIn:"root"}),O})()}}]);