"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8170],{4780:(b,P,s)=>{s.d(P,{W:()=>I});var e=s(4438),h=s(7376),t=s(4078),o=s(4742),l=s(177);let a=(()=>{var _;class u{constructor(n){this.dateService=n}transform(n,r){return n?this.dateService.formatMonthLong(n):""}}return(_=u).\u0275fac=function(n){return new(n||_)(e.rXU(t.k,16))},_.\u0275pipe=e.EJ8({name:"monthName",type:_,pure:!0}),u})();var m=s(357);function E(_,u){if(1&_&&(e.j41(0,"ion-col",11),e.EFF(1),e.nI1(2,"qWeekdayName"),e.k0s()),2&_){const g=u.$implicit,n=e.XpG();e.R7$(),e.SpI(" ",e.i5U(2,1,g,n.lang)," ")}}function M(_,u){1&_&&e.nrm(0,"span",16)}function D(_,u){if(1&_){const g=e.RV6();e.j41(0,"ion-col",14),e.bIt("click",function(){const r=e.eBV(g).$implicit,i=e.XpG(2);return e.Njj(i.onClickDay(r))}),e.EFF(1),e.DNE(2,M,1,0,"span",15),e.k0s()}if(2&_){const g=u.$implicit,n=e.XpG(2);e.Y8G("ngClass",n.getDayClasses(g)),e.R7$(),e.SpI(" ",g.day," "),e.R7$(),e.Y8G("ngIf",g.numberOfEvents>0)}}function C(_,u){if(1&_&&(e.j41(0,"ion-row",12),e.DNE(1,D,3,3,"ion-col",13),e.k0s()),2&_){const g=u.$implicit;e.R7$(),e.Y8G("ngForOf",g)}}let I=(()=>{var _;class u{constructor(n){this.ds=n,this.events=[],this.lang="sv",this.selectDay=new e.bkB,this.selectMonth=new e.bkB,this.now=new Date(Date.now()),this.calendarDays=[],this.weeks=[],this.firstWeekDates=[],this.init()}ngOnChanges(){this.buildViewModel()}onClickDay(n){this.selectedDay=n,this.emitSelectDay()}onClickMonth(){this.jumpToThisMonth(),this.selectToday(),this.emitSelectMonth()}onSwipe(n){2===n.direction?this.forward():4===n.direction&&this.back()}get selectedYear(){return this.startOfSelectedMonth?this.startOfSelectedMonth.getFullYear().toString():""}isSelected(n){return this.selectedDay&&this.ds.isSameDay(n.date,this.selectedDay.date)}getDayClasses(n){let r=[n.isThisMonth?"this-month":"not-this-month"];return n.isToday&&r.push("today"),this.isSelected(n)&&r.push("selected"),n.numberOfEvents>0&&r.push("has-event"),r}jumpToThisMonth(){this.startOfSelectedMonth=this.ds.startOfMonth(this.now),this.buildViewModel()}back(){this.startOfSelectedMonth=this.ds.subMonths(this.startOfSelectedMonth,1),this.buildViewModel(),this.emitSelectMonth()}forward(){this.startOfSelectedMonth=this.ds.addMonths(this.startOfSelectedMonth,1),this.buildViewModel(),this.emitSelectMonth()}init(){this.jumpToThisMonth(),this.selectToday()}buildFirstWeekDates(){let n=[],r=this.ds.startOfWeek(this.startOfSelectedMonth);[0,1,2,3,4,5,6].forEach(i=>n.push(this.ds.addDays(r,i))),this.firstWeekDates=n}buildViewModel(){this.calendarDays=[],this.weeks=[],this.buildFirstWeekDates(),this.buildMonth()}buildMonth(){let n=this.ds.startOfWeek(this.startOfSelectedMonth);do{let r=[];[0,1,2,3,4,5,6].forEach(i=>{let p=this.buildCalendarDay(this.ds.addDays(n,i));this.calendarDays.push(p),r.push(p)}),this.weeks.push(r),n=this.ds.addDays(n,7)}while(this.nextWeekStartsInSelectedMonth())}nextWeekStartsInSelectedMonth(){let n=this.startOfSelectedMonth.getMonth(),r=h.last(this.calendarDays).date;return this.ds.addDays(r,1).getMonth()===n}buildCalendarDay(n){return{date:n,day:n.getDate(),isThisMonth:n.getMonth()===this.startOfSelectedMonth.getMonth(),isToday:this.ds.isSameDay(n,this.now),numberOfEvents:this.getNumberOfEvents(n)}}emitSelectDay(){let n=this.getNextDayWithEvents(this.selectedDay.date);this.selectDay.emit({date:this.selectedDay.date,numberOfEvents:this.selectedDay.numberOfEvents,nextDateWithEvents:n?n.date:null})}emitSelectMonth(){let n={firstVisibleDate:h.first(this.calendarDays).date,lastVisibleDate:h.last(this.calendarDays).date,startDate:this.ds.startOfMonth(this.startOfSelectedMonth),endDate:this.ds.endOfMonth(this.startOfSelectedMonth)};this.selectMonth.emit(n)}getNextDayWithEvents(n){let r=h.findIndex(this.calendarDays,i=>this.ds.isSameDay(i.date,n));for(let i=r;i<this.calendarDays.length;i++){let p=this.calendarDays[i];if(p.numberOfEvents>0)return p}return null}getNumberOfEvents(n){let r=h.find(this.events,i=>this.ds.isSameDay(i.date,n));return r?r.numberOfEvents:0}selectToday(){let n=h.find(this.calendarDays,r=>this.ds.isSameDay(r.date,this.now));this.selectedDay=n}hasDateChanged(){return!this.selectedDay||!this.ds.isSameDay(this.startOfSelectedMonth,this.selectedDay.date)}}return(_=u).\u0275fac=function(n){return new(n||_)(e.rXU(t.k))},_.\u0275cmp=e.VBU({type:_,selectors:[["calendar-month"]],inputs:{events:"events",lang:"lang"},outputs:{selectDay:"selectDay",selectMonth:"selectMonth"},features:[e.OA$],decls:16,vars:7,consts:[["id","calendar",3,"swipe"],[1,"ion-no-padding"],[1,"ion-justify-content-center"],["size","2",1,"ion-text-center"],["size","small",3,"click"],["name","chevron-back"],["size","8",1,"ion-text-center"],["size","small","fill","clear",3,"click"],["name","chevron-forward"],["class","calendar-header-col",4,"ngFor","ngForOf"],["class","calendar-row",4,"ngFor","ngForOf"],[1,"calendar-header-col"],[1,"calendar-row"],["class","calendar-col",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"calendar-col",3,"click","ngClass"],["class","event-blip",4,"ngIf"],[1,"event-blip"]],template:function(n,r){1&n&&(e.j41(0,"div",0),e.bIt("swipe",function(p){return r.onSwipe(p)}),e.j41(1,"ion-grid",1)(2,"ion-row",2)(3,"ion-col",3)(4,"ion-button",4),e.bIt("click",function(){return r.back()}),e.nrm(5,"ion-icon",5),e.k0s()(),e.j41(6,"ion-col",6)(7,"ion-button",7),e.bIt("click",function(){return r.onClickMonth()}),e.EFF(8),e.nI1(9,"monthName"),e.k0s()(),e.j41(10,"ion-col",3)(11,"ion-button",4),e.bIt("click",function(){return r.forward()}),e.nrm(12,"ion-icon",8),e.k0s()()(),e.j41(13,"ion-row"),e.DNE(14,E,3,4,"ion-col",9),e.k0s(),e.DNE(15,C,2,1,"ion-row",10),e.k0s()()),2&n&&(e.R7$(8),e.Lme(" ",e.i5U(9,4,r.startOfSelectedMonth,r.lang)," ",r.selectedYear," "),e.R7$(6),e.Y8G("ngForOf",r.firstWeekDates),e.R7$(),e.Y8G("ngForOf",r.weeks))},dependencies:[o.Jm,o.hU,o.lO,o.iq,o.ln,l.YU,l.Sq,l.bT,a,m.Y],styles:["#calendar[_ngcontent-%COMP%]{font-family:Helvetica,Arial,sans-serif}#calendar[_ngcontent-%COMP%]   .calendar-header-col[_ngcontent-%COMP%]{font-size:.75rem;text-align:center;color:#666}#calendar[_ngcontent-%COMP%]   .calendar-row[_ngcontent-%COMP%]:last-child{border-bottom:1px solid #eee}#calendar[_ngcontent-%COMP%]   .calendar-row[_ngcontent-%COMP%]   .calendar-col[_ngcontent-%COMP%]{padding:.5em!important;display:flex;justify-content:center;text-align:center;padding:.8rem;font-size:.8rem;border-left:1px solid #eee;border-top:1px solid #eee}#calendar[_ngcontent-%COMP%]   .calendar-row[_ngcontent-%COMP%]   .calendar-col[_ngcontent-%COMP%]:last-child{border-right:1px solid #eee}#calendar[_ngcontent-%COMP%]   .calendar-row[_ngcontent-%COMP%]   .not-this-month[_ngcontent-%COMP%]{color:#989898;background:#eee}#calendar[_ngcontent-%COMP%]   .calendar-row[_ngcontent-%COMP%]   .today[_ngcontent-%COMP%]{text-decoration:underline}#calendar[_ngcontent-%COMP%]   .calendar-row[_ngcontent-%COMP%]   .event-blip[_ngcontent-%COMP%]{background:var(--quiculum-pink);width:.5rem;height:.5rem;display:inline-block;border-radius:.25rem;position:absolute;top:3.5px;right:3.5px}#calendar[_ngcontent-%COMP%]   .calendar-row[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{box-shadow:none;color:#fff;background:var(--quiculum-pink-tint)}"]}),u})()},4416:(b,P,s)=>{s.d(P,{l:()=>D});var e=s(4438),h=s(9598),t=s(4742),o=s(177),l=s(230);const a=["*"];function m(C,I){if(1&C&&(e.j41(0,"ion-buttons",5),e.nrm(1,"ion-back-button",6),e.nI1(2,"translate"),e.k0s()),2&C){const _=e.XpG();e.R7$(),e.FS9("text",e.bMT(2,2,"BACK")),e.Y8G("defaultHref",_.backPage)}}function E(C,I){1&C&&(e.j41(0,"ion-menu-toggle",5)(1,"ion-button",7),e.nrm(2,"ion-icon",8),e.k0s()())}function M(C,I){if(1&C&&(e.j41(0,"ion-title"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&C){const _=e.XpG();e.R7$(),e.SpI(" ",e.bMT(2,1,_.pageTitle)," ")}}let D=(()=>{var C;class I{constructor(u){this.router=u,this.backPage=""}navToMyAccount(){this.router.navigate(["my-account"])}}return(C=I).\u0275fac=function(u){return new(u||C)(e.rXU(h.Ix))},C.\u0275cmp=e.VBU({type:C,selectors:[["app-header"]],inputs:{pageTitle:"pageTitle",backPage:"backPage"},ngContentSelectors:a,decls:9,vars:3,consts:[["slot","start",4,"ngIf"],[4,"ngIf"],["slot","end"],[3,"click"],["name","cog"],["slot","start"],[3,"defaultHref","text"],["size","small","fill","clear"],["name","menu"]],template:function(u,g){1&u&&(e.NAR(),e.j41(0,"ion-header")(1,"ion-toolbar"),e.DNE(2,m,3,4,"ion-buttons",0)(3,E,3,0,"ion-menu-toggle",0)(4,M,3,3,"ion-title",1),e.j41(5,"ion-buttons",2)(6,"ion-button",3),e.bIt("click",function(){return g.navToMyAccount()}),e.nrm(7,"ion-icon",4),e.k0s()()()(),e.SdG(8)),2&u&&(e.R7$(2),e.Y8G("ngIf",g.backPage),e.R7$(),e.Y8G("ngIf",!g.backPage),e.R7$(),e.Y8G("ngIf",!g.isLoadingUserInfo))},dependencies:[t.Jm,t.QW,t.eU,t.iq,t.cA,t.BC,t.ai,t.el,o.bT,l.D9]}),I})()},2952:(b,P,s)=>{s.d(P,{t:()=>l});var e=s(4438),h=s(4742),t=s(177);function o(a,m){if(1&a&&(e.j41(0,"p"),e.EFF(1),e.k0s()),2&a){const E=e.XpG();e.R7$(),e.JRh(E.text)}}let l=(()=>{var a;class m{constructor(){this.text=""}}return(a=m).\u0275fac=function(M){return new(M||a)},a.\u0275cmp=e.VBU({type:a,selectors:[["q-spinner"]],hostVars:2,hostBindings:function(M,D){2&M&&e.HbH(D.expand)},inputs:{text:"text",expand:"expand"},decls:5,vars:1,consts:[[1,"ion-no-padding","ion-no-margin"],[1,"ion-justify-content-center","ion-align-items-center"],[1,"ion-text-center"],[4,"ngIf"]],template:function(M,D){1&M&&(e.j41(0,"ion-grid",0)(1,"ion-row",1)(2,"ion-col",2),e.nrm(3,"ion-spinner"),e.DNE(4,o,2,1,"p",3),e.k0s()()()),2&M&&(e.R7$(4),e.Y8G("ngIf",D.text))},dependencies:[h.hU,h.lO,h.ln,h.w2,t.bT],styles:[".expand[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]{height:100%}.expand[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{height:100%}.expand[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{color:var(--quiculum-gray)}"]}),m})()},1876:(b,P,s)=>{s.d(P,{Y:()=>e});class e{constructor(t){this._selectedItems=[],this.equalityFunction=(o,l)=>o==l,t&&(this.equalityFunction=t)}get isAnySelected(){return this._selectedItems.length>0}get selectedItems(){return this._selectedItems}isSelected(t){return!!this.selectedItems.find(l=>this.equalityFunction(t,l))}clear(){this._selectedItems=[]}deselectItem(t){let l=this.selectedItems.findIndex(a=>this.equalityFunction(t,a));l>-1&&this.selectedItems.splice(l,1)}selectItem(t){this.isSelected(t)||this.selectedItems.push(t)}selectItems(t){t.forEach(o=>this.selectItem(o))}setSelectedItems(t){this._selectedItems=t}toggleItem(t){this.isSelected(t)?this.deselectItem(t):this.selectItem(t)}}},8330:(b,P,s)=>{s.d(P,{M:()=>r});var e=s(467),h=s(1876),t=s(4438),o=s(4742),l=s(3656),a=s(230),m=s(177);function E(i,p){if(1&i){const d=t.RV6();t.j41(0,"ion-button",1),t.bIt("click",function(){t.eBV(d);const f=t.XpG();return t.Njj(f.dismiss())}),t.EFF(1),t.nI1(2,"translate"),t.k0s()}2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"DONE")," "))}function M(i,p){if(1&i&&(t.j41(0,"p",6),t.EFF(1),t.k0s()),2&i){const d=t.XpG();t.R7$(),t.JRh(d.emptyLabel)}}function D(i,p){if(1&i){const d=t.RV6();t.j41(0,"ion-searchbar",8),t.nI1(1,"translate"),t.bIt("ionInput",function(f){t.eBV(d);const O=t.XpG(2);return t.Njj(O.onSearchInput(f))}),t.k0s()}2&i&&t.FS9("placeholder",t.bMT(1,1,"SEARCH"))}function C(i,p){if(1&i){const d=t.RV6();t.j41(0,"ion-item")(1,"ion-label"),t.EFF(2),t.k0s(),t.j41(3,"ion-checkbox",10),t.bIt("ionChange",function(){const f=t.eBV(d).$implicit,O=t.XpG(3);return t.Njj(O.onClickItem(f))}),t.k0s()()}if(2&i){const d=p.$implicit,c=t.XpG(3);t.R7$(2),t.JRh(d.name),t.R7$(),t.Y8G("checked",c.isSelected(d))}}function I(i,p){if(1&i&&(t.j41(0,"ion-list"),t.DNE(1,C,4,2,"ion-item",9),t.k0s()),2&i){const d=t.XpG(2);t.R7$(),t.Y8G("ngForOf",d.filteredItems)}}function _(i,p){if(1&i&&(t.j41(0,"div")(1,"ion-label",13),t.EFF(2),t.k0s()()),2&i){const d=t.XpG().$implicit;t.R7$(2),t.JRh(d.schoolName)}}function u(i,p){if(1&i){const d=t.RV6();t.j41(0,"ion-item",12),t.bIt("click",function(){const f=t.eBV(d).$implicit,O=t.XpG(3);return t.Njj(O.onClickItem(f))}),t.j41(1,"ion-label"),t.EFF(2),t.k0s(),t.DNE(3,_,3,1,"div",5),t.k0s()}if(2&i){const d=p.$implicit;t.R7$(2),t.JRh(d.name),t.R7$(),t.Y8G("ngIf",d.schoolName)}}function g(i,p){if(1&i&&(t.j41(0,"ion-list"),t.DNE(1,u,4,2,"ion-item",11),t.k0s()),2&i){const d=t.XpG(2);t.R7$(),t.Y8G("ngForOf",d.filteredItems)}}function n(i,p){if(1&i&&(t.qex(0),t.DNE(1,D,2,3,"ion-searchbar",7)(2,I,2,1,"ion-list",5)(3,g,2,1,"ion-list",5),t.bVm()),2&i){const d=t.XpG();t.R7$(),t.Y8G("ngIf",d.isSearchVisible),t.R7$(),t.Y8G("ngIf",d.isMultiSelect),t.R7$(),t.Y8G("ngIf",!d.isMultiSelect)}}let r=(()=>{var i;class p{constructor(c,f,O){this.modalCtrl=c,this.navParams=f,this.translate=O,this.isSearching=!1,this.filteredItems=[],this.selection=new h.Y}ionViewWillEnter(){var c=this;return(0,e.A)(function*(){yield c.initLang(),c.initView()})()}get isSearchVisible(){return this.items&&this.items.length>10}isSelected(c){return this.selection.isSelected(c)}onClickItem(c){this.isMultiSelect?this.toggleSelection(c):(this.selection.selectItem(c),this.dismiss())}onSearchInput(c){let f=c.target.value||"";this.filteredItems=this.items.filter(O=>this.match(f,O))}dismiss(){let c=this.selection.selectedItems;0===c.length?this.modalCtrl.dismiss():this.modalCtrl.dismiss(this.isMultiSelect?{items:c}:{item:c[0]})}initLang(){this.translate.setDefaultLang("sv");const c=this.translate.getBrowserLang();c&&c.startsWith("en")?this.translate.use("en"):this.translate.use("sv"),this.translate.get(["SELECTABLE_OPTIONS_MISSING","SELECT_ONE_OR_MORE","SELECT_ONE"]).subscribe(O=>{this.translations=O})}initView(){this.selection=new h.Y,this.emptyLabel=this.navParams.data.emptyLabel||this.translations.SELECTABLE_OPTIONS_MISSING,this.isMultiSelect=this.navParams.data.multi,this.title=this.navParams.data.title||(this.isMultiSelect?this.translations.SELECT_ONE_OR_MORE:this.translations.SELECT_ONE),this.items=this.navParams.data.items,this.isEmpty=0==this.items.length,this.selection.setSelectedItems(this.navParams.data.selectedItems||[]),this.filteredItems=this.items}match(c,f){let O=c.toLocaleLowerCase();return f.name.toLocaleLowerCase().indexOf(O)>-1}toggleSelection(c){this.selection.toggleItem(c)}}return(i=p).\u0275fac=function(c){return new(c||i)(t.rXU(o.W3),t.rXU(l.y8),t.rXU(a.c$))},i.\u0275cmp=t.VBU({type:i,selectors:[["page-picker"]],decls:14,vars:7,consts:[["slot","start"],["fill","clear",3,"click"],["slot","end"],["fill","clear",3,"click",4,"ngIf"],["class","ion-padding ion-text-center",4,"ngIf"],[4,"ngIf"],[1,"ion-padding","ion-text-center"],["autocapitalize","off",3,"placeholder","ionInput",4,"ngIf"],["autocapitalize","off",3,"ionInput","placeholder"],[4,"ngFor","ngForOf"],["item-end","",3,"ionChange","checked"],["button","",3,"click",4,"ngFor","ngForOf"],["button","",3,"click"],[2,"color","black","font-size","0.7em"]],template:function(c,f){1&c&&(t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),t.bIt("click",function(){return f.dismiss()}),t.j41(4,"span"),t.EFF(5),t.nI1(6,"translate"),t.k0s()()(),t.j41(7,"ion-title"),t.EFF(8),t.k0s(),t.j41(9,"ion-buttons",2),t.DNE(10,E,3,3,"ion-button",3),t.k0s()()(),t.j41(11,"ion-content"),t.DNE(12,M,2,1,"p",4)(13,n,4,3,"ng-container",5),t.k0s()),2&c&&(t.R7$(5),t.JRh(t.bMT(6,5,"CANCEL")),t.R7$(3),t.JRh(f.title),t.R7$(2),t.Y8G("ngIf",f.isMultiSelect),t.R7$(2),t.Y8G("ngIf",f.isEmpty),t.R7$(),t.Y8G("ngIf",!f.isEmpty))},dependencies:[m.Sq,m.bT,o.Jm,o.QW,o.eY,o.W9,o.eU,o.uz,o.he,o.nf,o.S1,o.BC,o.ai,o.hB,o.Gw,a.D9],encapsulation:2}),p})()},7175:(b,P,s)=>{s.d(P,{P:()=>h});var e=s(4438);let h=(()=>{var t;class o{transform(a,...m){if(!a)return"";let E=new RegExp("<[^>]+>","g");return a.replace(E," ").replace(new RegExp("\\s+")," ")}}return(t=o).\u0275fac=function(a){return new(a||t)},t.\u0275pipe=e.EJ8({name:"qNoHtml",type:t,pure:!0}),o})()},357:(b,P,s)=>{s.d(P,{Y:()=>t});var e=s(4438),h=s(4078);let t=(()=>{var o;class l{constructor(m){this.dateService=m}transform(m,E){return m?this.dateService.formatWeekDayLong(m):""}}return(o=l).\u0275fac=function(m){return new(m||o)(e.rXU(h.k,16))},o.\u0275pipe=e.EJ8({name:"qWeekdayName",type:o,pure:!0}),l})()},2129:(b,P,s)=>{s.d(P,{h:()=>t});var e=s(467),h=s(1622);class t extends h.D{constructor(l,a){super(),this.api=l,this.loginStatus=a,this.list=[],this.setupClearOnLogout()}clear(){this.list=[]}init(l){var a=this;return(0,e.A)(function*(){let m=JSON.stringify(l);return m!=a.stringifiedParams&&(a.clear(),a.stringifiedParams=m),a.list.length||(a.list=yield a.loadList(l)),a.list})()}refresh(){var l=this;return(0,e.A)(function*(){return l.list=[],l.init()})()}loadList(l){return this.api.get(this.listEndpoint,l)}setupClearOnLogout(){this.addSub(this.loginStatus.isLoggedInState.subscribe(l=>{l||this.clear()}))}}},6969:(b,P,s)=>{s.d(P,{s:()=>l});var e=s(2129),h=s(4438),t=s(6244),o=s(6186);let l=(()=>{var a;class m extends e.h{constructor(M,D){super(M,D),this.listEndpoint="api/students/list?includeallschools=true",this.setupClearOnRoleChange()}setupClearOnRoleChange(){this.addSub(this.loginStatus.roleNameState.subscribe(M=>{M&&this.clear()}))}}return(a=m).\u0275fac=function(M){return new(M||a)(h.KVO(t.j),h.KVO(o.B))},a.\u0275prov=h.jDH({token:a,factory:a.\u0275fac,providedIn:"root"}),m})()}}]);